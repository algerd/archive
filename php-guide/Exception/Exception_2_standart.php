<?php
/*
Блок, в котором предполагается исключение, заключается в try и исключающие ошибки будут ловиться в catch
Момент срабатывания исключения определяется с помощью throw.
В случае срабатывания исключения, код в блоке try после момента срабатывания не выполняется (после throw), 
а после блока-ловушки catch код снова возобнавляет работу.
Код в блоке finally будет выполняться в любом случае (при срабатывании или несрабатывании исключения).
*/
try {
    $x = 0;
    if (!$x) throw new Exception('Деление на ноль.', 666);
    $d = 100 / $x;
    
    echo 'Код не выполняется';
    
} catch (Exception  $ex) {    
    echo 'Cообшение исключения: '.$ex->getMessage().'<br>';
    echo 'Код исключения: '.$ex->getCode().'<br>';
    echo 'Файл, где выброшено исключение: '.$ex->getFile().'<br>';
    echo 'Строка, выбросившая исключениe: '.$ex->getLine().'<br>'; 
    
} finally {   
    echo '<br>Код выполняется в любом случае<br>';
}

echo '<br>Код продолжил работу';


// Исключения без блока try-catch вызывает встроеный в PHP блок вывода ошибок и выдаёт два сообщения:
// Fatal error: Uncaught exception 'Exception' with message 'Деление на ноль.' in I:\OpenServer...
// Exception: Деление на ноль. in I:\OpenServer...
throw new Exception('Деление на ноль.', 666);
